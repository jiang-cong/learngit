webpackJsonp([17],{W3Bd:function(e,t){},fhNV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),l=a.n(i),n={name:"add",data:function(){return{height:{height:"",overflowY:"auto"},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()+6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()+2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()+7776e6),e.$emit("pick",[t,a])}}]},options:[],Superior:"",fileList:[],beginTime:"",endTime:"",boxList:[{input:"",input1:"",value:"",tableData:[{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""}]}]}},methods:{handleChange:function(e,t){console.log(e),console.log(t)},leveList:function(){var e=this;this.$axios.get("/projectFinal/getAllCheck").then(function(t){console.log(t);var a=t.data.data;e.options=[];for(var i=0;i<a.length;i++)e.options.push({value:a[i].sysId,label:a[i].projectNum})})},addList:function(){this.boxList.push({input:"",input1:"",value:"",tableData:[{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""},{name:"",brief:"",upload:""}]})},delList:function(e){var t=this.$createElement;1==this.boxList.length?this.$notify({title:"错误的操作",message:t("i",{style:"color: teal"},"最后一条数据不可删除！")}):this.boxList.splice(e,1)},add:function(e){this.boxList[e].tableData.push({name:"",brief:"",upload:""})},del:function(e,t){var a=this.$createElement;1==this.boxList[t].tableData.length?this.$notify({title:"错误的操作",message:a("i",{style:"color: teal"},"最后一条数据不可删除！")}):this.boxList[t].tableData.splice(e,1)},change:function(e){this.beginTime=e[0],this.endTime=e[1],console.log(e)},preserve:function(e){for(var t=this,a=[],i=0;i<this.boxList.length;i++){for(var n=[],s=0;s<this.boxList[i].tableData.length;s++)""!=this.boxList[i].tableData[s].name&&""!=this.boxList[i].tableData[s].brief&&n.push({documentName:this.boxList[i].tableData[s].name,documentOverview:this.boxList[i].tableData[s].brief});a.push({projectNum:this.boxList[i].input,projectName:this.boxList[i].input1,parentProjectNum:this.Superior,beginTime:this.boxList[i].value[0],endTime:this.boxList[i].value[1],documentList:n})}var o=l()(a);console.log(a),this.$axios.post("/projectFinal/insertBenJi",o).then(function(a){console.log(a),200==a.data.code&&(t.$message({message:a.data.msg,type:"success"}),t.$router.push({name:e})),204==a.data.code&&t.$message.error(a.data.msg)})},cancel:function(e){this.$router.push({name:e})}},mounted:function(){this.leveList(),this.height.height=document.documentElement.clientHeight-120+"px"}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("header",[a("h4",[e._v("添加本级项目")]),e._v(" "),a("div",{staticClass:"sel"},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择上级项目编号"},model:{value:e.Superior,callback:function(t){e.Superior=t},expression:"Superior"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.addList}},[e._v("新增本级项目")])],1)]),e._v(" "),a("el-divider"),e._v(" "),a("div",{style:e.height},[e._l(e.boxList,function(t,i){return a("div",{key:i,staticClass:"box"},[a("el-card",{attrs:{shadow:"hover"}},[a("i",{staticClass:"el-icon-error",staticStyle:{"font-size":"25px",position:"absolute",right:"-10px",top:"-10px",cursor:"pointer"},on:{click:function(t){return e.delList(i)}}}),e._v(" "),a("div",{staticClass:"box-top"},[a("el-form",{ref:"form",refInFor:!0,attrs:{"label-width":"80px"}},[a("ul",[a("li",[a("el-form-item",{attrs:{label:"项目编号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入项目编号",clearable:""},model:{value:t.input,callback:function(a){e.$set(t,"input",a)},expression:"item.input"}})],1)],1),e._v(" "),a("li",[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入项目名称",clearable:""},model:{value:t.input1,callback:function(a){e.$set(t,"input1",a)},expression:"item.input1"}})],1)],1),e._v(" "),a("li",[a("el-form-item",{attrs:{label:"计划时间"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.change},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1)],1)])])],1),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticClass:"box-con"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"文档名称",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",placeholder:"请输入文档名称",clearable:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"brief",label:"文档简介"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:"",size:"small",placeholder:"请输入文档简介",clearable:""},model:{value:t.row.brief,callback:function(a){e.$set(t.row,"brief",a)},expression:"scope.row.brief"}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"上传文件",width:"200px"}},[[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://192.168.43.133:8080/projectFinal/insertProjectFinal","on-change":e.handleChange}},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"30px"}})])]],2),e._v(" "),a("el-table-column",{attrs:{label:"功能",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"20px"},on:{click:function(t){return e.add(i)}}}),e._v(" "),a("i",{staticClass:"el-icon-minus",staticStyle:{"font-size":"20px"},on:{click:function(a){return e.del(t.$index,i)}}})]}}],null,!0)})],1)],1)],1)],1)}),e._v(" "),a("div",{staticClass:"box-bot"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.preserve("addLeveProject")}}},[e._v("保 存")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.cancel("addLeveProject")}}},[e._v("取 消")])],1)],2)],1)},staticRenderFns:[]};var o=a("C7Lr")(n,s,!1,function(e){a("W3Bd")},"data-v-386be4c3",null);t.default=o.exports}});
//# sourceMappingURL=17.04d7f923eb9de1453ea0.js.map